<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Greyhound Sports Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}
    body{background:#f4f4f4;color:#111827}
    .navbar{display:flex;justify-content:space-between;align-items:center;padding:.8rem 5vw;background:#111827;color:#fff}
    .logo{font-weight:700;font-size:1.2rem}
    .cart-label{font-size:.85rem;background:#1f2937;padding:.3rem .8rem;border-radius:999px}
    .cart-label span{font-weight:600}
    main{padding:1.5rem 5vw 2.5rem;display:grid;grid-template-columns:minmax(0,3fr) minmax(0,2fr);gap:1.5rem}
    h1,h2{margin-bottom:.5rem}
    .muted{font-size:.8rem;opacity:.7;margin-bottom:.6rem}
    .filters,.subfilters{display:flex;flex-wrap:wrap;gap:.4rem;margin-bottom:.5rem}
    .subfilters{margin-bottom:.8rem}
    .filter-btn,.subfilter-btn{font-size:.8rem;padding:.3rem .8rem;border-radius:999px;border:1px solid #d1d5db;background:#fff;cursor:pointer}
    .subfilter-btn{font-size:.75rem;background:#f9fafb;padding:.25rem .7rem}
    .filter-btn.active,.subfilter-btn.active{background:#111827;color:#fff;border-color:#111827}
    .products-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.8rem}
    .product-card{background:#fff;border-radius:.6rem;padding:.7rem;border:1px solid #e5e7eb;display:flex;flex-direction:column;gap:.2rem;font-size:.85rem}
    .product-card h3{font-size:.9rem;margin-bottom:.1rem}
    .product-card p{font-size:.8rem;opacity:.85}
    .category-tag{font-size:.7rem;display:inline-block;background:#e5e7eb;padding:.1rem .5rem;border-radius:999px;margin-bottom:.2rem}
    .price-row{display:flex;align-items:baseline;gap:.4rem;margin-top:.3rem}
    .price{font-weight:700;font-size:.9rem}
    .mrp{font-size:.75rem;text-decoration:line-through;color:#9ca3af}
    .btn-small,.btn{display:inline-block;padding:.35rem .8rem;border-radius:999px;border:none;cursor:pointer;font-size:.8rem;font-weight:500;background:#111827;color:#fff;margin-top:.4rem}
    .btn{width:100%;text-align:center}
    .btn:hover,.btn-small:hover{opacity:.9}
    .side-panel{background:#fff;border-radius:.6rem;padding:.8rem;border:1px solid #e5e7eb;align-self:start}
    .cart-item{display:flex;justify-content:space-between;align-items:center;font-size:.8rem;margin-bottom:.3rem}
    .cart-item-name{max-width:130px}
    .cart-controls{display:flex;align-items:center;gap:.25rem}
    .qty-btn{width:20px;height:20px;border-radius:999px;border:1px solid #d1d5db;background:#f9fafb;cursor:pointer;font-size:.75rem}
    .qty-value{min-width:16px;text-align:center}
    .remove-btn{background:none;border:none;cursor:pointer;color:#ef4444;font-size:.75rem}
    .divider{border-top:1px solid #e5e7eb;margin:.5rem 0}
    .totals-row{display:flex;justify-content:space-between;font-size:.85rem;margin-bottom:.15rem}
    form{margin-top:.6rem;display:flex;flex-direction:column;gap:.4rem;font-size:.8rem}
    label{display:flex;flex-direction:column;gap:.2rem}
    input,textarea{padding:.35rem .5rem;border-radius:.35rem;border:1px solid #d1d5db;font-size:.8rem}
    textarea{resize:vertical}
    .order-message{margin-top:.5rem;font-size:.8rem}
    @media(max-width:800px){main{grid-template-columns:1fr}}
    @media(max-width:600px){.navbar{flex-direction:column;gap:.4rem;align-items:flex-start}}
  </style>
</head>
<body>
  <header class="navbar">
    <div class="logo">Greyhound Sports Store</div>
    <div class="cart-label">
      Cart items: <span id="cart-count">0</span>
    </div>
  </header>

  <main>
    <section>
      <h1>Products</h1>
      <p class="muted">Choose a category to view items. Click “Add to Cart” to build an order.</p>

      <div class="filters">
        <button class="filter-btn active" data-category="All">All</button>
        <button class="filter-btn" data-category="Clothes">Clothes</button>
        <button class="filter-btn" data-category="Cricket">Cricket</button>
        <button class="filter-btn" data-category="Football">Football</button>
        <button class="filter-btn" data-category="Badminton">Badminton</button>
        <button class="filter-btn" data-category="Indoor Games">Indoor Games</button>
        <button class="filter-btn" data-category="Outdoor Games">Outdoor Games</button>
      </div>

      <div class="subfilters" id="cricket-subfilters" style="display:none;">
        <button class="subfilter-btn active" data-sub="All">All</button>
        <button class="subfilter-btn" data-sub="Bat">Bat</button>
        <button class="subfilter-btn" data-sub="Ball">Ball</button>
        <button class="subfilter-btn" data-sub="Helmet">Helmet</button>
        <button class="subfilter-btn" data-sub="Wicket">Wicket</button>
      </div>

      <div class="products-grid" id="products"></div>
    </section>

    <aside class="side-panel">
      <h2>Your Cart</h2>
      <div id="cart-items"></div>
      <p id="empty-cart-msg" class="muted">Your cart is empty.</p>

      <div class="divider"></div>
      <div class="totals-row">
        <span>Subtotal</span>
        <span>₹<span id="subtotal">0</span></span>
      </div>
      <div class="totals-row">
        <span>Shipping</span>
        <span>₹<span id="shipping">0</span></span>
      </div>
      <div class="totals-row" style="font-weight:600;">
        <span>Total</span>
        <span>₹<span id="total">0</span></span>
      </div>

      <p class="muted">Demo only – this does not send data to a backend.</p>

      <form id="order-form">
        <label>Full Name
          <input type="text" name="name" required>
        </label>
        <label>Phone Number
          <input type="tel" name="phone" required>
        </label>
        <label>Address
          <textarea name="address" rows="2" required></textarea>
        </label>
        <button type="submit" class="btn">Place Demo Order</button>
      </form>

      <div class="order-message" id="order-message"></div>
    </aside>
  </main>

  <!-- Products data in separate file -->
  <script src="products.js"></script>

  <script>
    let cart = [];
    let currentCategory = "All";
    let currentCricketSub = "All";

    const allProducts = () => Object.values(products).flat();

    const categoryForId = id => {
      for (const [cat, list] of Object.entries(products)) {
        const p = list.find(x => x.id === id);
        if (p) return cat === "Cricket" && p.subCategory ? `Cricket - ${p.subCategory}` : cat;
      }
      return "";
    };

    function renderProducts() {
      const container = document.getElementById("products");
      container.innerHTML = "";

      let list;
      if (currentCategory === "All") {
        list = allProducts();
      } else {
        list = products[currentCategory] || [];
        if (currentCategory === "Cricket" && currentCricketSub !== "All") {
          list = list.filter(p => p.subCategory === currentCricketSub);
        }
      }

      list.forEach(p => {
        const card = document.createElement("div");
        card.className = "product-card";

        const tag =
          currentCategory === "All" ? categoryForId(p.id) :
          currentCategory === "Cricket" && p.subCategory ? `Cricket - ${p.subCategory}` :
          currentCategory;

        card.innerHTML = `
          <span class="category-tag">${tag}</span>
          <h3>${p.name}</h3>
          <p>${p.description.replace(/ \| Stock:.*/, "")}</p>
          <div class="price-row">
            <span class="price">₹${p.price}</span>
            <span class="mrp">₹${p.mrp}</span>
          </div>
          <button class="btn-small">Add to Cart</button>
        `;
        card.querySelector("button").addEventListener("click", () => addToCart(p.id));
        container.appendChild(card);
      });
    }

    function addToCart(id) {
      const existing = cart.find(i => i.id === id);
      existing ? existing.quantity++ : cart.push({ id, quantity: 1 });
      renderCart();
    }

    function renderCart() {
      const container = document.getElementById("cart-items");
      const emptyMsg = document.getElementById("empty-cart-msg");
      container.innerHTML = "";

      if (!cart.length) {
        emptyMsg.style.display = "block";
      } else {
        emptyMsg.style.display = "none";
      }

      let subtotal = 0, count = 0;
      const all = allProducts();

      cart.forEach(item => {
        const p = all.find(x => x.id === item.id);
        if (!p) return;
        subtotal += p.price * item.quantity;
        count += item.quantity;

        const row = document.createElement("div");
        row.className = "cart-item";
        row.innerHTML = `
          <span class="cart-item-name">${p.name}</span>
          <div class="cart-controls">
            <button class="qty-btn" data-action="dec">-</button>
            <span class="qty-value">${item.quantity}</span>
            <button class="qty-btn" data-action="inc">+</button>
            <button class="remove-btn">x</button>
          </div>
        `;
        const [dec, , inc, remove] = row.querySelectorAll("button");

        inc.addEventListener("click", () => { item.quantity++; renderCart(); });
        dec.addEventListener("click", () => {
          item.quantity > 1 ? item.quantity-- : cart = cart.filter(c => c !== item);
          renderCart();
        });
        remove.addEventListener("click", () => {
          cart = cart.filter(c => c !== item);
          renderCart();
        });

        container.appendChild(row);
      });

      const shipping = 0;
      const total = subtotal + shipping;
      document.getElementById("subtotal").textContent = subtotal;
      document.getElementById("shipping").textContent = shipping;
      document.getElementById("total").textContent = total;
      document.getElementById("cart-count").textContent = count;
    }

    function setupFilters() {
      const buttons = document.querySelectorAll(".filter-btn");
      const cricketSub = document.getElementById("cricket-subfilters");

      buttons.forEach(btn => {
        btn.addEventListener("click", () => {
          buttons.forEach(b => b.classList.remove("active"));
          btn.classList.add("active");
          currentCategory = btn.dataset.category;
          currentCricketSub = "All";

          if (currentCategory === "Cricket") {
            cricketSub.style.display = "flex";
            resetCricketSub();
          } else {
            cricketSub.style.display = "none";
          }
          renderProducts();
        });
      });
    }

    function resetCricketSub() {
      document.querySelectorAll("#cricket-subfilters .subfilter-btn")
        .forEach((b, i) => b.classList.toggle("active", i === 0));
    }

    function setupCricketSubfilters() {
      const subButtons = document.querySelectorAll("#cricket-subfilters .subfilter-btn");
      subButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          subButtons.forEach(b => b.classList.remove("active"));
          btn.classList.add("active");
          currentCricketSub = btn.dataset.sub;
          renderProducts();
        });
      });
    }

    function setupOrderForm() {
      const form = document.getElementById("order-form");
      const msgEl = document.getElementById("order-message");
      form.addEventListener("submit", e => {
        e.preventDefault();
        if (!cart.length) {
          msgEl.style.color = "#b91c1c";
          msgEl.textContent = "Cart is empty. Add at least one item before placing an order.";
          return;
        }
        const data = new FormData(form);
        const name = data.get("name");
        const phone = data.get("phone");
        const address = data.get("address");
        console.log("Demo order placed:", { customer:{name,phone,address}, cart });
        msgEl.style.color = "#15803d";
        msgEl.textContent = `Thank you, ${name}! Your demo order is stored in the browser console.`;
        cart = [];
        renderCart();
        form.reset();
      });
    }

    setupFilters();
    setupCricketSubfilters();
    renderProducts();
    renderCart();
    setupOrderForm();
  </script>
</body>
</html>
